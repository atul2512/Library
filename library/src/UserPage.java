/*
 * UserPage.java
 *
 * Created on August 20, 2006, 9:19 PM
 */

/**
 *
 * @author  mukesh
 */
 
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.sql.*;
import javax.swing.table.*;
public class UserPage extends javax.swing.JFrame {
    
    /** Creates new form UserPage */
    public UserPage() {
        initComponents();
    }
    
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    // <editor-fold defaultstate="collapsed" desc=" Generated Code ">
    private void initComponents() {
        BOOKRESERVE = new javax.swing.JTabbedPane();
        user_detail_pan = new javax.swing.JPanel();
        wel_library = new javax.swing.JLabel();
        user_id_txt = new javax.swing.JLabel();
        changepass = new javax.swing.JButton();
        viewdata = new javax.swing.JButton();
        serbysubject1 = new javax.swing.JLabel();
        serbysubject2 = new javax.swing.JLabel();
        ser_book_name1 = new javax.swing.JPanel();
        serbyname = new javax.swing.JLabel();
        serbyauther = new javax.swing.JLabel();
        serbysubject = new javax.swing.JLabel();
        ser_by_name_txt = new javax.swing.JTextField();
        ser_by_subject_txt = new javax.swing.JTextField();
        ser_by_auther_but = new javax.swing.JTextField();
        serch_by_name_bot = new javax.swing.JButton();
        ser_by_subject_bot = new javax.swing.JButton();
        ser_by_auther_bot = new javax.swing.JButton();
        ser_result_lab = new javax.swing.JLabel();
        notfoun_lab = new javax.swing.JLabel();
        notfoun_lab1 = new javax.swing.JLabel();
        ser_book_name2 = new javax.swing.JLabel();
        ser_book_id1 = new javax.swing.JLabel();
        ser_book_id2 = new javax.swing.JLabel();
        bokreserve = new javax.swing.JPanel();
        book_return_lab = new javax.swing.JLabel();
        book_reserve_bot = new javax.swing.JButton();
        book_reserve_txt = new javax.swing.JTextField();
        book_return_lab1 = new javax.swing.JLabel();
        userid_no = new javax.swing.JTextField();
        logout_pan = new javax.swing.JPanel();
        logoutlab4 = new javax.swing.JLabel();
        exit = new javax.swing.JButton();

        getContentPane().setLayout(null);

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        BOOKRESERVE.setBorder(javax.swing.BorderFactory.createLineBorder(new java.awt.Color(0, 0, 0)));
        user_detail_pan.setLayout(null);

        wel_library.setFont(new java.awt.Font("Tahoma", 3, 36));
        wel_library.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        wel_library.setText("WELCOME TO LIBRARY");
        user_detail_pan.add(wel_library);
        wel_library.setBounds(100, 100, 490, 60);

        user_id_txt.setFont(new java.awt.Font("Tahoma", 3, 24));
        user_id_txt.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        user_id_txt.setText(userlogin.student);
        user_detail_pan.add(user_id_txt);
        user_id_txt.setBounds(230, 190, 230, 40);

        changepass.setFont(new java.awt.Font("Tahoma", 3, 14));
        changepass.setForeground(new java.awt.Color(102, 0, 102));
        changepass.setText("CHANGE PASSWORD");
		changepass.addActionListener(new ActionListener(){
  			public void actionPerformed(ActionEvent evt)
			{
				   changepassword cpd=new changepassword();
            }
        });
        changepass.setToolTipText("Click to change the password");
        user_detail_pan.add(changepass);
        changepass.setBounds(410, 370, 220, 40);

        viewdata.setFont(new java.awt.Font("Tahoma", 3, 14));
        viewdata.setForeground(new java.awt.Color(153, 0, 153));
        viewdata.setText("VIEW  DETAILS");
		viewdata.addActionListener(new ActionListener(){
  			public void actionPerformed(ActionEvent evt)
			{		
				  userdetail udd=new userdetail();
				  udd.usrdetail();
            }
        });
        viewdata.setToolTipText("Click to change the password");
        user_detail_pan.add(viewdata);
        viewdata.setBounds(230, 320, 180, 40);

        serbysubject1.setFont(new java.awt.Font("Tahoma", 1, 24));
        serbysubject1.setForeground(new java.awt.Color(0, 0, 0));
        serbysubject1.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        serbysubject1.setText("=>");
        user_detail_pan.add(serbysubject1);
        serbysubject1.setBounds(130, 320, 40, 40);

        serbysubject2.setFont(new java.awt.Font("Tahoma", 1, 24));
        serbysubject2.setForeground(new java.awt.Color(0, 0, 0));
        serbysubject2.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        serbysubject2.setText("=>");
        user_detail_pan.add(serbysubject2);
        serbysubject2.setBounds(310, 370, 40, 40);

        BOOKRESERVE.addTab("USER'S DETAIL", user_detail_pan);

        ser_book_name1.setLayout(null);

        serbyname.setFont(new java.awt.Font("Tahoma", 3, 14));
        serbyname.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        serbyname.setText("Search by name");
        serbyname.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        ser_book_name1.add(serbyname);
        serbyname.setBounds(140, 90, 180, 30);

        serbyauther.setFont(new java.awt.Font("Tahoma", 3, 14));
        serbyauther.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        serbyauther.setText("Search by Author");
        serbyauther.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        ser_book_name1.add(serbyauther);
        serbyauther.setBounds(140, 200, 180, 30);

        serbysubject.setFont(new java.awt.Font("Tahoma", 3, 14));
        serbysubject.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        serbysubject.setText("Search by Subject");
        serbysubject.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        ser_book_name1.add(serbysubject);
        serbysubject.setBounds(140, 140, 180, 30);

        ser_by_name_txt.setFont(new java.awt.Font("Tahoma", 1, 14));
        ser_by_name_txt.setForeground(new java.awt.Color(102, 0, 0));
        ser_book_name1.add(ser_by_name_txt);
        ser_by_name_txt.setBounds(340, 90, 180, 30);

        ser_by_subject_txt.setFont(new java.awt.Font("Tahoma", 1, 14));
        ser_by_subject_txt.setForeground(new java.awt.Color(102, 0, 0));
        ser_book_name1.add(ser_by_subject_txt);
        ser_by_subject_txt.setBounds(340, 140, 180, 30);

        ser_by_auther_but.setFont(new java.awt.Font("Tahoma", 1, 14));
        ser_by_auther_but.setForeground(new java.awt.Color(102, 0, 0));
        ser_book_name1.add(ser_by_auther_but);
        ser_by_auther_but.setBounds(340, 200, 180, 30);

        serch_by_name_bot.setFont(new java.awt.Font("Tahoma", 3, 14));
        serch_by_name_bot.setText("ok");
        serch_by_name_bot.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                serch_by_name_botActionPerformed(evt);
            }
        });

        ser_book_name1.add(serch_by_name_bot);
        serch_by_name_bot.setBounds(560, 90, 60, 30);

        ser_by_subject_bot.setFont(new java.awt.Font("Tahoma", 3, 14));
        ser_by_subject_bot.setText("ok");
        ser_book_name1.add(ser_by_subject_bot);
        ser_by_subject_bot.setBounds(560, 140, 60, 30);

        ser_by_auther_bot.setFont(new java.awt.Font("Tahoma", 3, 14));
        ser_by_auther_bot.setText("ok");
        ser_book_name1.add(ser_by_auther_bot);
        ser_by_auther_bot.setBounds(560, 200, 60, 30);

        ser_result_lab.setFont(new java.awt.Font("Tahoma", 3, 14));
        ser_result_lab.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        ser_result_lab.setText("Search Results");
        ser_result_lab.setBorder(javax.swing.BorderFactory.createEtchedBorder());
        ser_book_name1.add(ser_result_lab);
        ser_result_lab.setBounds(50, 320, 180, 30);

        notfoun_lab.setFont(new java.awt.Font("Tahoma", 3, 14));
        notfoun_lab.setForeground(new java.awt.Color(153, 0, 0));
        notfoun_lab.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        notfoun_lab.setText("No Result found try again");
        ser_book_name1.add(notfoun_lab);
        notfoun_lab.setBounds(220, 260, 290, 30);

        notfoun_lab1.setFont(new java.awt.Font("Tahoma", 3, 14));
        notfoun_lab1.setForeground(new java.awt.Color(153, 0, 0));
        notfoun_lab1.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        notfoun_lab1.setText("book name 1");
        ser_book_name1.add(notfoun_lab1);
        notfoun_lab1.setBounds(100, 380, 220, 30);

        ser_book_name2.setFont(new java.awt.Font("Tahoma", 3, 14));
        ser_book_name2.setForeground(new java.awt.Color(153, 0, 0));
        ser_book_name2.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        ser_book_name2.setText("book name 2");
        ser_book_name1.add(ser_book_name2);
        ser_book_name2.setBounds(100, 420, 220, 30);

        ser_book_id1.setFont(new java.awt.Font("Tahoma", 3, 14));
        ser_book_id1.setForeground(new java.awt.Color(153, 0, 0));
        ser_book_id1.setText("book id no 1");
        ser_book_name1.add(ser_book_id1);
        ser_book_id1.setBounds(320, 380, 190, 30);

        ser_book_id2.setFont(new java.awt.Font("Tahoma", 3, 14));
        ser_book_id2.setForeground(new java.awt.Color(153, 0, 0));
        ser_book_id2.setText("book id no 2");
        ser_book_name1.add(ser_book_id2);
        ser_book_id2.setBounds(320, 420, 190, 30);

        BOOKRESERVE.addTab("SERCH BOOK", ser_book_name1);

        bokreserve.setLayout(null);

        book_return_lab.setFont(new java.awt.Font("Tahoma", 3, 18));
        book_return_lab.setText("ENTER THE BOOK No: ");
        bokreserve.add(book_return_lab);
        book_return_lab.setBounds(80, 170, 210, 40);

        book_reserve_bot.setFont(new java.awt.Font("Tahoma", 3, 14));
        book_reserve_bot.setText("RETURN");
		book_reserve_bot.addActionListener(new ActionListener(){
  			public void actionPerformed(ActionEvent evt)
			{
				   reservebook();
            }
        });
        book_reserve_bot.setToolTipText("CLICK TO RETURN THE BOOK");
        bokreserve.add(book_reserve_bot);
        book_reserve_bot.setBounds(320, 250, 140, 40);

        book_reserve_txt.setFont(new java.awt.Font("Tahoma", 1, 14));
        book_reserve_txt.setForeground(new java.awt.Color(102, 0, 0));
        bokreserve.add(book_reserve_txt);
        book_reserve_txt.setBounds(320, 170, 200, 30);

        book_return_lab1.setFont(new java.awt.Font("Tahoma", 3, 18));
        book_return_lab1.setText("ENTER You Id No :");
        bokreserve.add(book_return_lab1);
        book_return_lab1.setBounds(90, 120, 210, 40);

        userid_no.setFont(new java.awt.Font("Tahoma", 1, 14));
        userid_no.setForeground(new java.awt.Color(102, 0, 0));
        bokreserve.add(userid_no);
        userid_no.setBounds(320, 120, 200, 30);

        BOOKRESERVE.addTab("BOOK RESERVE", bokreserve);

        logout_pan.setLayout(null);

        logoutlab4.setFont(new java.awt.Font("Tahoma", 3, 36));
        logoutlab4.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        logoutlab4.setText("CLICK TO LOGOUT ");
        logout_pan.add(logoutlab4);
        logoutlab4.setBounds(70, 180, 560, 60);

        exit.setFont(new java.awt.Font("Tahoma", 3, 14));
        exit.setText("EXIT");
		exit.addActionListener(new ActionListener(){
  			public void actionPerformed(ActionEvent evt)
			{
				    setVisible(false);
					//LogPage llp=new LogPage();
				FirstPage fpp=new FirstPage();
            }
        });
        logout_pan.add(exit);
        exit.setBounds(270, 280, 170, 50);

        BOOKRESERVE.addTab("LogOut(exit)", logout_pan);

        getContentPane().add(BOOKRESERVE);
        BOOKRESERVE.setBounds(0, 0, 800,600);

        pack();
		setSize(800,600);
		setLocation(50,50);
		setVisible(true);
    }// </editor-fold>

    private void serch_by_name_botActionPerformed(java.awt.event.ActionEvent evt) {                                                  
// TODO add your handling code here:
    }                                                 
    
    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
       
              UserPage upp=  new UserPage();
       
    }
    
    // Variables declaration - do not modify
    private javax.swing.JTabbedPane BOOKRESERVE;
    private javax.swing.JPanel bokreserve;
    private javax.swing.JButton book_reserve_bot;
    private javax.swing.JTextField book_reserve_txt;
    private javax.swing.JLabel book_return_lab;
    private javax.swing.JLabel book_return_lab1;
    private javax.swing.JButton changepass;
    private javax.swing.JButton exit;
    private javax.swing.JPanel logout_pan;
    private javax.swing.JLabel logoutlab4;
    private javax.swing.JLabel notfoun_lab;
    private javax.swing.JLabel notfoun_lab1;
    private javax.swing.JLabel ser_book_id1;
    private javax.swing.JLabel ser_book_id2;
    private javax.swing.JPanel ser_book_name1;
    private javax.swing.JLabel ser_book_name2;
    private javax.swing.JButton ser_by_auther_bot;
    private javax.swing.JTextField ser_by_auther_but;
    private javax.swing.JTextField ser_by_name_txt;
    private javax.swing.JButton ser_by_subject_bot;
    private javax.swing.JTextField ser_by_subject_txt;
    private javax.swing.JLabel ser_result_lab;
    private javax.swing.JLabel serbyauther;
    private javax.swing.JLabel serbyname;
    private javax.swing.JLabel serbysubject;
    private javax.swing.JLabel serbysubject1;
    private javax.swing.JLabel serbysubject2;
    private javax.swing.JButton serch_by_name_bot;
    private javax.swing.JPanel user_detail_pan;
    private javax.swing.JLabel user_id_txt;
    private javax.swing.JTextField userid_no;
    private javax.swing.JButton viewdata;
    private javax.swing.JLabel wel_library;
    // End of variables declaration
	
	
	
public void reservebook(){

		{
				Connection con=null;
				String url="jdbc:odbc:BITSLibrary";
				Statement st=null;
				
			  try
			  {
					Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
					
			   		con=DriverManager.getConnection(url);
					
			   		st = con.createStatement();
					String bkk=book_reserve_txt.getText();
					bkk=bkk.trim();
					System.out.println(bkk);
	       int i=st.executeUpdate("UPDATE bookcopy SET status ='reserved'");
//int ii=st.executeUpdate("Insert into books values ('"+bk_no+"','"+bk_name+"','"+sub+"','"+at+"','"+det+"')");
int iii=st.executeUpdate("UPDATE bookcopy SET reservedon='"+cdate.todaydatee.toString()+"'");
int iiii=st.executeUpdate("UPDATE bookcopy SET reservedby='"+userlogin.student+"'");
								
						
						
						
						st.close();
						con.close();	
				
			  }
			  catch(SQLException ex)
			   {
			    System.out.println("Unable to access the database");
			   }
			catch(ClassNotFoundException ex)
			{
		 System.out.println("Class not found");
			 }
			  catch(Exception ex)
			  {
               System.out.println("Exception raised is:"+ex);
			  }
			  finally{
			 // con=null;
			  }
		}
    
}
}