/*
 * NewAccount.java
 *
 * Created on August 22, 2006, 10:55 PM
 */

/**
 *
 * @author  mukesh
 */
 import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import java.sql.*;
import javax.swing.table.*;
public class NewAccount extends javax.swing.JFrame {
    
    /** Creates new form NewAccount */
    public NewAccount() {
        initComponents();
    }
    
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    // <editor-fold defaultstate="collapsed" desc=" Generated Code ">
    private void initComponents() {
        jLabel1 = new javax.swing.JLabel();
        jLabel2 = new javax.swing.JLabel();
        jLabel3 = new javax.swing.JLabel();
        jLabel4 = new javax.swing.JLabel();
        jLabel5 = new javax.swing.JLabel();
        jLabel6 = new javax.swing.JLabel();
        userid = new javax.swing.JTextField();
        username = new javax.swing.JTextField();
        branch = new javax.swing.JTextField();
        department = new javax.swing.JTextField();
        course = new javax.swing.JTextField();
        jLabel7 = new javax.swing.JLabel();
        semester = new javax.swing.JTextField();
        update = new javax.swing.JButton();
        finish = new javax.swing.JButton();

        getContentPane().setLayout(null);

       // setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);
        setTitle("DETAIL OF NEW USER");
        jLabel1.setFont(new java.awt.Font("Tahoma", 1, 14));
        jLabel1.setForeground(new java.awt.Color(102, 0, 0));
        jLabel1.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        jLabel1.setText("USER Id:");
        getContentPane().add(jLabel1);
        jLabel1.setBounds(130, 60, 150, 20);

        jLabel2.setFont(new java.awt.Font("Tahoma", 1, 14));
        jLabel2.setForeground(new java.awt.Color(102, 0, 0));
        jLabel2.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        jLabel2.setText("USER NAME:");
        getContentPane().add(jLabel2);
        jLabel2.setBounds(130, 100, 150, 20);

        jLabel3.setFont(new java.awt.Font("Tahoma", 1, 14));
        jLabel3.setForeground(new java.awt.Color(102, 0, 0));
        jLabel3.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        jLabel3.setText("GENDER:");
        getContentPane().add(jLabel3);
        jLabel3.setBounds(130, 130, 150, 20);

        jLabel4.setFont(new java.awt.Font("Tahoma", 1, 14));
        jLabel4.setForeground(new java.awt.Color(102, 0, 0));
        jLabel4.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        jLabel4.setText("DEPARTMENT:");
        getContentPane().add(jLabel4);
        jLabel4.setBounds(130, 170, 150, 20);

        jLabel5.setFont(new java.awt.Font("Tahoma", 1, 14));
        jLabel5.setForeground(new java.awt.Color(102, 0, 0));
        jLabel5.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        jLabel5.setText("COURSE:");
        getContentPane().add(jLabel5);
        jLabel5.setBounds(130, 210, 150, 20);

        jLabel6.setFont(new java.awt.Font("Tahoma", 1, 18));
        jLabel6.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
        jLabel6.setText("NEW USER'S DETAIL");
        getContentPane().add(jLabel6);
        jLabel6.setBounds(160, 20, 300, 20);

        userid.setFont(new java.awt.Font("Tahoma", 0, 14));
        getContentPane().add(userid);
        userid.setBounds(330, 60, 130, 20);

        username.setFont(new java.awt.Font("Tahoma", 0, 14));
        getContentPane().add(username);
        username.setBounds(330, 100, 130, 20);

        branch.setFont(new java.awt.Font("Tahoma", 0, 14));
        getContentPane().add(branch);
        branch.setBounds(330, 130, 130, 20);

        department.setFont(new java.awt.Font("Tahoma", 0, 14));
        getContentPane().add(department);
        department.setBounds(330, 170, 130, 20);

        course.setFont(new java.awt.Font("Tahoma", 0, 14));
        getContentPane().add(course);
        course.setBounds(330, 210, 130, 20);

        jLabel7.setFont(new java.awt.Font("Tahoma", 1, 14));
        jLabel7.setForeground(new java.awt.Color(102, 0, 0));
        jLabel7.setHorizontalAlignment(javax.swing.SwingConstants.RIGHT);
        jLabel7.setText("SEMESTER:");
        getContentPane().add(jLabel7);
        jLabel7.setBounds(130, 240, 150, 20);

        semester.setFont(new java.awt.Font("Tahoma", 0, 14));
        getContentPane().add(semester);
        semester.setBounds(330, 240, 130, 20);

        update.setText("UPDATE");
        update.setToolTipText("click to add new account");
		update.addActionListener(new ActionListener(){
  			public void actionPerformed(ActionEvent evt)
			{
				if( userid.getText().equals(""))
					{
					JOptionPane.showMessageDialog((Component) null, "Plese Enter \n the details ", "ERROOOOOOOR", JOptionPane.ERROR_MESSAGE);
					}
					else{
					
					//AdminPage ap=new AdminPage();
					 addnewuser();
					
					}
				   
	
            }
        });
        getContentPane().add(update);
        update.setBounds(530, 200, 80, 30);

        finish.setText("FINISH");
        finish.setToolTipText("click to return");
		finish.addActionListener(new ActionListener(){
  			public void actionPerformed(ActionEvent evt)
			{
				    setVisible(false);
					//AdminPage app=new AdminPage();
	
            }
        });
        getContentPane().add(finish);
        finish.setBounds(530, 240, 80, 30);

        pack();
		
		setSize(630,325);
		setVisible(true);
		setLocation(200,200);
    }// </editor-fold>
    
    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        
                NewAccount na=new NewAccount();
         
    }
    
    // Variables declaration - do not modify
    private javax.swing.JTextField branch;
    private javax.swing.JTextField course;
    private javax.swing.JTextField department;
    private javax.swing.JButton finish;
    private javax.swing.JLabel jLabel1;
    private javax.swing.JLabel jLabel2;
    private javax.swing.JLabel jLabel3;
    private javax.swing.JLabel jLabel4;
    private javax.swing.JLabel jLabel5;
    private javax.swing.JLabel jLabel6;
    private javax.swing.JLabel jLabel7;
    private javax.swing.JTextField semester;
    private javax.swing.JButton update;
    private javax.swing.JTextField userid;
    private javax.swing.JTextField username;
    // End of variables declaration
    
	//*************************************************************************add user and password**************************************

void addnewuser()
		{
				Connection con=null;
				String url="jdbc:odbc:BITSlibrary";
				Statement st=null;
				
			  try
			  {
					
					String user_idd =  userid.getText();
						   user_idd =  user_idd.trim();
					String user_name =  username.getText();
						   user_name =  user_name.trim();
					String brc =  branch.getText();
						   brc =  brc.trim();
					String dep =  department.getText();
						   dep =  dep.trim();	   
					String cor =  course.getText();
						   cor =  cor.trim();	
					String semm =  semester.getText();
						   semm =  semm.trim();	 	   
						   
				
					Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
					
			   		con=DriverManager.getConnection(url);
					
			   		st = con.createStatement();
					
	
				int ii=st.executeUpdate("Insert into usernpasswd values ('"+user_idd+"','nitrkl')");
				int iii=st.executeUpdate("Insert INTO userdata values ('"+user_idd+"','"+user_name+"','"+brc+"','"+dep+"','"+cor+"','"+semm+"',0)");
				
				if(ii>0)
				{
					userid.setText("");
					JOptionPane.showMessageDialog((Component) null, "NEW USER CREATED", "SUCCESS", JOptionPane.INFORMATION_MESSAGE);
			    
				
				}
					else
					{
					userid.setText("");
				JOptionPane.showMessageDialog((Component) null, "SORRY TRY AGAIN", "Error", JOptionPane.INFORMATION_MESSAGE);
						
					}
					
			 }
			  catch(SQLException ex)
			   {
			    System.out.println("Unable to access the database");
				//JOptionPane.showMessageDialog((Component) null, "the user already exists", "Error", JOptionPane.INFORMATION_MESSAGE);
			   }
			  catch(ClassNotFoundException ex)
			   {
			    System.out.println("Class not found");
			   }
			  catch(Exception ex)
			  {
               System.out.println("Exception raised is:"+ex);
			  }
			  finally{
			  con=null;
			  }
		}   
   //**********************************************************************************************************************************************
   
	
}
